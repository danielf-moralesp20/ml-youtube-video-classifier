schema: '2.0'
stages:
  make_dataset:
    cmd: python src/data/make_dataset.py --config params.yaml
    deps:
    - path: src/data/make_dataset.py
      md5: 4bc9d58a8f798d57d10b7c2acfce6fc2
      size: 1630
    params:
      params.yaml:
        make_dataset:
          datasets:
          - dir: data/raw/YouTube Titles and description using youtube api.csv
            feature_names:
              title: Title
              description: Description
            target: Category
          - dir: data/raw/Youtube Video Dataset.csv
            feature_names:
              title: Title
              description: Description
            target: Category
          - dir: data/raw/youtube.csv
    outs:
    - path: data/interim/youtube.csv
      md5: 456b6da45a72feb079c83a4e26fcd61f
      size: 20820603
  build_features:
    cmd: python src/features/build_features.py --config params.yaml
    deps:
    - path: data/processed/youtube.csv
      md5: a7c79d27c25382539d0ba17c5245cf15
      size: 16821662
    - path: src/features/build_features.py
      md5: 0e691607243fef53bba1af263825fc00
      size: 1958
    params:
      params.yaml:
        base:
          random_state: 20
        build_features:
          test_size: 0.2
          min_df: 0.05
    outs:
    - path: data/processed/test.csv
      md5: e9b1c8f359cd33954603329d7498925d
      size: 2086991
    - path: data/processed/train.csv
      md5: 08781aadfec5ebcd9a51ff5fadc73bb7
      size: 8318992
  clean_dataset:
    cmd:
    - python -m nltk.downloader stopwords
    - python src/features/clean_dataset.py --config params.yaml
    deps:
    - path: data/interim/youtube.csv
      md5: 456b6da45a72feb079c83a4e26fcd61f
      size: 20820603
    - path: src/features/clean_dataset.py
      md5: 09a7a5acc0416c243048d497f721c5f2
      size: 2026
    params:
      params.yaml:
        clean_dataset:
          english_threshold_confidence: 0.95
          min_token_length: 3
          min_tokens_count: 5
    outs:
    - path: data/processed/youtube.csv
      md5: a7c79d27c25382539d0ba17c5245cf15
      size: 16821662
  train_model:
    cmd: python src/models/train_model.py --config params.yaml
    deps:
    - path: data/processed/train.csv
      md5: 08781aadfec5ebcd9a51ff5fadc73bb7
      size: 8318992
    - path: src/models/train_model.py
      md5: d7d68aad1280fedb5ffef56a7b7d1830
      size: 1391
    params:
      params.yaml:
        base:
          random_state: 20
        train_model:
          cv: 3
          cv_distributions:
            n_estimators:
            - 100
            - 300
            - 500
    outs:
    - path: models/model.joblib
      md5: e380072f28ad8f1e37e3680ba039739c
      size: 2606063
