schema: '2.0'
stages:
  make_dataset:
    cmd: python src/data/make_dataset.py --config params.yaml
    deps:
    - path: src/data/make_dataset.py
      md5: 4bc9d58a8f798d57d10b7c2acfce6fc2
      size: 1630
    params:
      params.yaml:
        make_dataset:
          datasets:
          - dir: data/raw/YouTube Titles and description using youtube api.csv
            feature_names:
              title: Title
              description: Description
            target: Category
          - dir: data/raw/Youtube Video Dataset.csv
            feature_names:
              title: Title
              description: Description
            target: Category
          - dir: data/raw/youtube.csv
    outs:
    - path: data/interim/youtube.csv
      md5: 456b6da45a72feb079c83a4e26fcd61f
      size: 20820603
  build_features:
    cmd: python src/features/build_features.py --config params.yaml
    deps:
    - path: data/processed/youtube.csv
      md5: a7c79d27c25382539d0ba17c5245cf15
      size: 16821662
    - path: src/features/build_features.py
      md5: 0e691607243fef53bba1af263825fc00
      size: 1958
    params:
      params.yaml:
        base:
          random_state: 20
        build_features:
          test_size: 0.2
          min_df: 0.05
    outs:
    - path: data/processed/test.csv
      md5: e9b1c8f359cd33954603329d7498925d
      size: 2086991
    - path: data/processed/train.csv
      md5: 08781aadfec5ebcd9a51ff5fadc73bb7
      size: 8318992
  clean_dataset:
    cmd:
    - python -m nltk.downloader stopwords
    - python src/features/clean_dataset.py --config params.yaml
    deps:
    - path: data/interim/youtube.csv
      md5: 456b6da45a72feb079c83a4e26fcd61f
      size: 20820603
    - path: src/features/clean_dataset.py
      md5: 09a7a5acc0416c243048d497f721c5f2
      size: 2026
    params:
      params.yaml:
        clean_dataset:
          english_threshold_confidence: 0.95
          min_token_length: 3
          min_tokens_count: 5
    outs:
    - path: data/processed/youtube.csv
      md5: a7c79d27c25382539d0ba17c5245cf15
      size: 16821662
  train_model:
    cmd: python src/models/train_model.py --config params.yaml
    deps:
    - path: data/processed/train.csv
      md5: 08781aadfec5ebcd9a51ff5fadc73bb7
      size: 8318992
    - path: src/models/train_model.py
      md5: cd3309f3bbb97677771ec259fdd2e83f
      size: 1415
    params:
      params.yaml:
        base:
          random_state: 20
        train_model:
          cv: 3
          cv_distributions:
            n_estimators:
            - 100
            - 300
            - 500
    outs:
    - path: models/model.joblib
      md5: 59ec6b5148e37bedff818ded7ba62da0
      size: 4320997
  test_model:
    cmd: python src/models/test_model.py --config params.yaml
    deps:
    - path: data/processed/test.csv
      md5: e9b1c8f359cd33954603329d7498925d
      size: 2086991
    - path: models/model.joblib
      md5: 59ec6b5148e37bedff818ded7ba62da0
      size: 4320997
    - path: src/models/test_model.py
      md5: a90fa33dd6ed91fa6a8eadc03d38a700
      size: 1905
    params:
      params.yaml:
        test_model:
    outs:
    - path: reports/classification_report_data.csv
      md5: 95c7fbdf7067c597833cee54eda5798a
      size: 481
    - path: reports/confusion_matrix_data.csv
      md5: e3792bde32b2799e548b1636887a830c
      size: 49850
    - path: reports/summary.json
      md5: 0201207da48f94de29610c8cd8a4d2dd
      size: 116
